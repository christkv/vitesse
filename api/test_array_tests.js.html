<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: test/array_tests.js</title>
    
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"Vitesse","disqus":true,"googleAnalytics":"UA-29229787-1","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"","description":"","keyword":""},"linenums":true};
    </script>
    

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', UA-29229787-1, 'auto');
      ga('send', 'pageview');
    </script>    
    
</head>
<body>
<div id="wrap" class="clearfix" style="width:100%;">
    <table style="height:100%;width:100%">
        <tr>
            <td valign='top' width="1px">
                
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">Vitesse</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="AllOfNode">
            <span class="title">
                <a href="AllOfNode.html">AllOfNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="AllOfNode#addValidations"><a href="AllOfNode.html#addValidations">addValidations</a></li>
            
                <li data-name="AllOfNode#generate"><a href="AllOfNode.html#generate">generate</a></li>
            
                <li data-name="AllOfNode#path"><a href="AllOfNode.html#path">path</a></li>
            
                <li data-name="AllOfNode#setTypeCheck"><a href="AllOfNode.html#setTypeCheck">setTypeCheck</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="AnyNode">
            <span class="title">
                <a href="AnyNode.html">AnyNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="AnyNode#generate"><a href="AnyNode.html#generate">generate</a></li>
            
                <li data-name="AnyNode#path"><a href="AnyNode.html#path">path</a></li>
            
                <li data-name="AnyNode#setTypeCheck"><a href="AnyNode.html#setTypeCheck">setTypeCheck</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="AnyOfNode">
            <span class="title">
                <a href="AnyOfNode.html">AnyOfNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="AnyOfNode#addValidations"><a href="AnyOfNode.html#addValidations">addValidations</a></li>
            
                <li data-name="AnyOfNode#generate"><a href="AnyOfNode.html#generate">generate</a></li>
            
                <li data-name="AnyOfNode#path"><a href="AnyOfNode.html#path">path</a></li>
            
                <li data-name="AnyOfNode#setTypeCheck"><a href="AnyOfNode.html#setTypeCheck">setTypeCheck</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ArrayNode">
            <span class="title">
                <a href="ArrayNode.html">ArrayNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ArrayNode#addAdditionalItemsValidation"><a href="ArrayNode.html#addAdditionalItemsValidation">addAdditionalItemsValidation</a></li>
            
                <li data-name="ArrayNode#addCustomValidator"><a href="ArrayNode.html#addCustomValidator">addCustomValidator</a></li>
            
                <li data-name="ArrayNode#addItemValidation"><a href="ArrayNode.html#addItemValidation">addItemValidation</a></li>
            
                <li data-name="ArrayNode#addPositionalItemValidation"><a href="ArrayNode.html#addPositionalItemValidation">addPositionalItemValidation</a></li>
            
                <li data-name="ArrayNode#addValidation"><a href="ArrayNode.html#addValidation">addValidation</a></li>
            
                <li data-name="ArrayNode#generate"><a href="ArrayNode.html#generate">generate</a></li>
            
                <li data-name="ArrayNode#path"><a href="ArrayNode.html#path">path</a></li>
            
                <li data-name="ArrayNode#setTypeCheck"><a href="ArrayNode.html#setTypeCheck">setTypeCheck</a></li>
            
                <li data-name="ArrayNode#uniqueItems"><a href="ArrayNode.html#uniqueItems">uniqueItems</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="BooleanNode">
            <span class="title">
                <a href="BooleanNode.html">BooleanNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="BooleanNode#addCustomValidator"><a href="BooleanNode.html#addCustomValidator">addCustomValidator</a></li>
            
                <li data-name="BooleanNode#generate"><a href="BooleanNode.html#generate">generate</a></li>
            
                <li data-name="BooleanNode#path"><a href="BooleanNode.html#path">path</a></li>
            
                <li data-name="BooleanNode#setTypeCheck"><a href="BooleanNode.html#setTypeCheck">setTypeCheck</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ClosureCompiler">
            <span class="title">
                <a href="ClosureCompiler.html">ClosureCompiler</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ClosureCompiler#compile"><a href="ClosureCompiler.html#compile">compile</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Compiler">
            <span class="title">
                <a href="Compiler.html">Compiler</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Compiler#compile"><a href="Compiler.html#compile">compile</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="CustomNode">
            <span class="title">
                <a href="CustomNode.html">CustomNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="CustomNode#generate"><a href="CustomNode.html#generate">generate</a></li>
            
                <li data-name="CustomNode#path"><a href="CustomNode.html#path">path</a></li>
            
                <li data-name="CustomNode#setContext"><a href="CustomNode.html#setContext">setContext</a></li>
            
                <li data-name="CustomNode#setValidator"><a href="CustomNode.html#setValidator">setValidator</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="EnumNode">
            <span class="title">
                <a href="EnumNode.html">EnumNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="EnumNode#addEnums"><a href="EnumNode.html#addEnums">addEnums</a></li>
            
                <li data-name="EnumNode#generate"><a href="EnumNode.html#generate">generate</a></li>
            
                <li data-name="EnumNode#path"><a href="EnumNode.html#path">path</a></li>
            
                <li data-name="EnumNode#setTypeCheck"><a href="EnumNode.html#setTypeCheck">setTypeCheck</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="IntegerNode">
            <span class="title">
                <a href="IntegerNode.html">IntegerNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="IntegerNode#addCustomValidator"><a href="IntegerNode.html#addCustomValidator">addCustomValidator</a></li>
            
                <li data-name="IntegerNode#addValidation"><a href="IntegerNode.html#addValidation">addValidation</a></li>
            
                <li data-name="IntegerNode#generate"><a href="IntegerNode.html#generate">generate</a></li>
            
                <li data-name="IntegerNode#path"><a href="IntegerNode.html#path">path</a></li>
            
                <li data-name="IntegerNode#setTypeCheck"><a href="IntegerNode.html#setTypeCheck">setTypeCheck</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="NotNode">
            <span class="title">
                <a href="NotNode.html">NotNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="NotNode#addValidations"><a href="NotNode.html#addValidations">addValidations</a></li>
            
                <li data-name="NotNode#generate"><a href="NotNode.html#generate">generate</a></li>
            
                <li data-name="NotNode#path"><a href="NotNode.html#path">path</a></li>
            
                <li data-name="NotNode#setTypeCheck"><a href="NotNode.html#setTypeCheck">setTypeCheck</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="NullNode">
            <span class="title">
                <a href="NullNode.html">NullNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="NullNode#addCustomValidator"><a href="NullNode.html#addCustomValidator">addCustomValidator</a></li>
            
                <li data-name="NullNode#generate"><a href="NullNode.html#generate">generate</a></li>
            
                <li data-name="NullNode#path"><a href="NullNode.html#path">path</a></li>
            
                <li data-name="NullNode#setTypeCheck"><a href="NullNode.html#setTypeCheck">setTypeCheck</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="NumberNode">
            <span class="title">
                <a href="NumberNode.html">NumberNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="NumberNode#addCustomValidator"><a href="NumberNode.html#addCustomValidator">addCustomValidator</a></li>
            
                <li data-name="NumberNode#addValidation"><a href="NumberNode.html#addValidation">addValidation</a></li>
            
                <li data-name="NumberNode#generate"><a href="NumberNode.html#generate">generate</a></li>
            
                <li data-name="NumberNode#path"><a href="NumberNode.html#path">path</a></li>
            
                <li data-name="NumberNode#setTypeCheck"><a href="NumberNode.html#setTypeCheck">setTypeCheck</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ObjectNode">
            <span class="title">
                <a href="ObjectNode.html">ObjectNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ObjectNode#addAdditionalPropertiesValidator"><a href="ObjectNode.html#addAdditionalPropertiesValidator">addAdditionalPropertiesValidator</a></li>
            
                <li data-name="ObjectNode#addChild"><a href="ObjectNode.html#addChild">addChild</a></li>
            
                <li data-name="ObjectNode#addCustomValidator"><a href="ObjectNode.html#addCustomValidator">addCustomValidator</a></li>
            
                <li data-name="ObjectNode#addDependency"><a href="ObjectNode.html#addDependency">addDependency</a></li>
            
                <li data-name="ObjectNode#addPatternPropertiesValidator"><a href="ObjectNode.html#addPatternPropertiesValidator">addPatternPropertiesValidator</a></li>
            
                <li data-name="ObjectNode#addValidation"><a href="ObjectNode.html#addValidation">addValidation</a></li>
            
                <li data-name="ObjectNode#generate"><a href="ObjectNode.html#generate">generate</a></li>
            
                <li data-name="ObjectNode#path"><a href="ObjectNode.html#path">path</a></li>
            
                <li data-name="ObjectNode#prohibitedFields"><a href="ObjectNode.html#prohibitedFields">prohibitedFields</a></li>
            
                <li data-name="ObjectNode#requiredFields"><a href="ObjectNode.html#requiredFields">requiredFields</a></li>
            
                <li data-name="ObjectNode#setTypeCheck"><a href="ObjectNode.html#setTypeCheck">setTypeCheck</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="OneOfNode">
            <span class="title">
                <a href="OneOfNode.html">OneOfNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="OneOfNode#addValidations"><a href="OneOfNode.html#addValidations">addValidations</a></li>
            
                <li data-name="OneOfNode#generate"><a href="OneOfNode.html#generate">generate</a></li>
            
                <li data-name="OneOfNode#path"><a href="OneOfNode.html#path">path</a></li>
            
                <li data-name="OneOfNode#setTypeCheck"><a href="OneOfNode.html#setTypeCheck">setTypeCheck</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="RecursiveNode">
            <span class="title">
                <a href="RecursiveNode.html">RecursiveNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="RecursiveNode#generate"><a href="RecursiveNode.html#generate">generate</a></li>
            
                <li data-name="RecursiveNode#path"><a href="RecursiveNode.html#path">path</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="StringNode">
            <span class="title">
                <a href="StringNode.html">StringNode</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="StringNode#addCustomValidator"><a href="StringNode.html#addCustomValidator">addCustomValidator</a></li>
            
                <li data-name="StringNode#addValidation"><a href="StringNode.html#addValidation">addValidation</a></li>
            
                <li data-name="StringNode#generate"><a href="StringNode.html#generate">generate</a></li>
            
                <li data-name="StringNode#path"><a href="StringNode.html#path">path</a></li>
            
                <li data-name="StringNode#setTypeCheck"><a href="StringNode.html#setTypeCheck">setTypeCheck</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
            </td>
            <td valign='top'>        
                <div class="main">
                    <h1 class="page-title" data-filename="test_array_tests.js.html">Source: test/array_tests.js</h1>
                    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";

var f = require('util').format;

/**
 * Create an Array validation that validates the length of the array and type.
 * @example-class ArrayNode
 * @example-method addValidation
 */
exports['simple validator for any node'] = {
  // The actual test we wish to run
  test: function(configure, test) {
    var assert = require('assert'),
      Compiler = require('../lib/compiler').Compiler,
      ArrayNode = require('../lib/array'),
      CustomNode = require('../lib/custom');
    // LINE assert = require('assert'),
    // LINE   Compiler = require('vitesse').Compiler,
    // LINE   ArrayNode = require('vitesse').ArrayNode,
    // LINE   CustomNode = require('../lib/custom');
    // BEGIN
    var schema = new ArrayNode(null, null, {typeCheck:true})
      .addValidation({$gte: 2, $lte: 5});
    var compiler = new Compiler({});
    // Compile the AST
    var func = compiler.compile(schema, {});

    // Validate {}
    var results = func.validate({});
    assert.equal(1, results.length);
    assert.equal('field is not an array', results[0].message);
    assert.deepEqual(['object'], results[0].path);
    assert.ok(results[0].rule === schema);

    // Validate [1]
    var results = func.validate([1]);
    assert.equal(1, results.length);
    assert.equal('array fails length validation {"$gte":2,"$lte":5}', results[0].message);
    assert.deepEqual(['object'], results[0].path);
    assert.ok(results[0].rule === schema);

    // Validate number 100
    var results = func.validate([1, 2, 3]);
    assert.equal(0, results.length);
    // END
    test.done();
  }
}

/**
 * Create an Array validation that requires all elements to be a string.
 * @example-class ArrayNode
 * @example-method addItemValidation
 */
exports['simple per item validator for any node'] = {
  // The actual test we wish to run
  test: function(configure, test) {
    var assert = require('assert'),
      Compiler = require('../lib/compiler').Compiler,
      StringNode = require('../lib/string'),
      ArrayNode = require('../lib/array'),
      CustomNode = require('../lib/custom');
    // LINE assert = require('assert'),
    // LINE   Compiler = require('vitesse').Compiler,
    // LINE   StringNode = require('vitesse').StringNode,
    // LINE   ArrayNode = require('vitesse').ArrayNode,
    // LINE   CustomNode = require('../lib/custom');
    // BEGIN
    var string = new StringNode(null, null, {typeCheck:true});
    var schema = new ArrayNode(null, null, {typeCheck:true})
      .addItemValidation(string);
    var compiler = new Compiler({});
    // Compile the AST
    var func = compiler.compile(schema, {});

    // Validate {}
    var results = func.validate({});
    assert.equal(1, results.length);
    assert.equal('field is not an array', results[0].message);
    assert.deepEqual(['object'], results[0].path);
    assert.ok(results[0].rule === schema);

    // Validate [1]
    var results = func.validate([1]);
    assert.equal(1, results.length);
    assert.equal('field is not a string', results[0].message);
    assert.deepEqual(['object', '0'], results[0].path);
    assert.ok(results[0].rule === string);

    // Validate ['1']
    var results = func.validate(['1']);
    assert.equal(0, results.length);
    // END
    test.done();
  }
}

/**
 * Create an Array validation that requires positional elements to pass specific validations
 * @example-class ArrayNode
 * @example-method addPositionalItemValidation
 */
exports['simple positional item validators for any node'] = {
  // The actual test we wish to run
  test: function(configure, test) {
    var assert = require('assert'),
      Compiler = require('../lib/compiler').Compiler,
      StringNode = require('../lib/string'),
      IntegerNode = require('../lib/integer'),
      ArrayNode = require('../lib/array'),
      CustomNode = require('../lib/custom');
    // LINE assert = require('assert'),
    // LINE   Compiler = require('vitesse').Compiler,
    // LINE   StringNode = require('vitesse').StringNode,
    // LINE   IntegerNode = require('vitesse').IntegerNode,
    // LINE   ArrayNode = require('vitesse').ArrayNode,
    // LINE   CustomNode = require('../lib/custom');
    // BEGIN
    var integer = new IntegerNode(null, null, {typeCheck:true});
    var string = new StringNode(null, null, {typeCheck:true});
    var schema = new ArrayNode(null, null, {typeCheck:true})
      .addPositionalItemValidation(0, string)
      .addPositionalItemValidation(1, integer);
    
    // Create a compiler
    var compiler = new Compiler({});
    // Compile the AST
    var func = compiler.compile(schema, {});
    // Validate {}
    var results = func.validate({});
    assert.equal(1, results.length);
    assert.equal('field is not an array', results[0].message);
    assert.deepEqual(['object'], results[0].path);
    assert.ok(results[0].rule === schema);

    // Validate [1]
    var results = func.validate([1]);
    assert.equal(1, results.length);
    assert.equal('field is not a string', results[0].message);
    assert.deepEqual(['object', '0'], results[0].path);
    assert.ok(results[0].rule === string);

    // Validate ['1', '1']
    var results = func.validate(['1', '1']);
    assert.equal(1, results.length);
    assert.equal('field is not an integer', results[0].message);
    assert.deepEqual(['object', '1'], results[0].path);
    assert.ok(results[0].rule === integer);

    // Validate ['1', 2, 'test']
    var results = func.validate(['1', 2, 'test']);
    assert.equal(0, results.length);

    // Validate ['1']
    var results = func.validate(['1']);
    assert.equal(0, results.length);
    // END
    test.done();
  }
}

/**
 * Create a Custom validator
 * @example-class ArrayNode
 * @example-method addCustomValidator
 */
exports['simple custom validator for string node'] = {
  // The actual test we wish to run
  test: function(configure, test) {
    var assert = require('assert'),
      Compiler = require('../lib/compiler').Compiler,
      ArrayNode = require('../lib/array'),
      CustomNode = require('../lib/custom');
    // LINE assert = require('assert'),
    // LINE   Compiler = require('vitesse').Compiler,
    // LINE   ArrayNode = require('vitesse').ArrayNode,
    // LINE   CustomNode = require('../lib/custom');
    // BEGIN

    var customValidator = new CustomNode()
      .setContext({ max: 4 })
      .setValidator(function(object, context) {
        if(object.length > context.max) {
          return new Error('array longer than maximum size ' + context.max);
        }
      });

    var schema = new ArrayNode(null, null, {typeCheck:true})
      .addCustomValidator(customValidator);

    var compiler = new Compiler({});
    // Compile the AST
    var func = compiler.compile(schema, {});

    // Validate {}
    var results = func.validate({});
    assert.equal(1, results.length);
    assert.equal('field is not an array', results[0].message);
    assert.deepEqual(['object'], results[0].path);
    assert.ok(results[0].rule === schema);

    // Validate [1, 2, 3, 4, 5]
    var results = func.validate([1, 2, 3, 4, 5]);
    assert.equal(1, results.length);
    assert.equal('array longer than maximum size 4', results[0].message);
    assert.deepEqual(['object'], results[0].path);
    assert.ok(results[0].rule === customValidator);

    // Validate [1, 2, 3]
    var results = func.validate([1, 2, 3]);
    assert.equal(0, results.length);
    // END
    test.done();
  }
}

/**
 * Create an Array validation that requires positional elements as well as additional items validation
 * @example-class ArrayNode
 * @example-method addAdditionalItemsValidation
 */
exports['simple positional item validators with additional items validation for any node'] = {
  // The actual test we wish to run
  test: function(configure, test) {
    var assert = require('assert'),
      Compiler = require('../lib/compiler').Compiler,
      StringNode = require('../lib/string'),
      IntegerNode = require('../lib/integer'),
      ArrayNode = require('../lib/array'),
      CustomNode = require('../lib/custom');
    // LINE assert = require('assert'),
    // LINE   Compiler = require('vitesse').Compiler,
    // LINE   StringNode = require('vitesse').StringNode,
    // LINE   IntegerNode = require('vitesse').IntegerNode,
    // LINE   ArrayNode = require('vitesse').ArrayNode,
    // LINE   CustomNode = require('../lib/custom');
    // BEGIN
    var integer = new IntegerNode(null, null, {typeCheck:true});
    var string = new StringNode(null, null, {typeCheck:true});
    var schema = new ArrayNode(null, null, {typeCheck:true})
      .addPositionalItemValidation(0, string)
      .addPositionalItemValidation(1, integer)
      .addAdditionalItemsValidation(integer);
    
    // Create a compiler
    var compiler = new Compiler({});
    // Compile the AST
    var func = compiler.compile(schema, {});
    // Validate {}
    var results = func.validate({});
    assert.equal(1, results.length);
    assert.equal('field is not an array', results[0].message);
    assert.deepEqual(['object'], results[0].path);
    assert.ok(results[0].rule === schema);

    // Validate [1]
    var results = func.validate([1]);
    assert.equal(1, results.length);
    assert.equal('field is not a string', results[0].message);
    assert.deepEqual(['object', '0'], results[0].path);
    assert.ok(results[0].rule === string);

    // Validate ['1', '1']
    var results = func.validate(['1', '1']);
    assert.equal(1, results.length);
    assert.equal('field is not an integer', results[0].message);
    assert.deepEqual(['object', '1'], results[0].path);
    assert.ok(results[0].rule === integer);

    // Validate ['1', 2, 'test']
    var results = func.validate(['1', 2, 'test']);
    assert.equal(1, results.length);
    assert.equal('field is not an integer', results[0].message);
    assert.deepEqual(['object', '2'], results[0].path);
    assert.ok(results[0].rule === integer);

    // Validate ['1']
    var results = func.validate(['1']);
    assert.equal(0, results.length);
    // END
    test.done();
  }
}

/**
 * Create an Array validation that requires positional elements as well as additional items validation
 * @example-class ArrayNode
 * @example-method addAdditionalItemsValidation
 */
exports['simple positional item validators with additional items validation equal to false for any node'] = {
  // The actual test we wish to run
  test: function(configure, test) {
    var assert = require('assert'),
      Compiler = require('../lib/compiler').Compiler,
      StringNode = require('../lib/string'),
      IntegerNode = require('../lib/integer'),
      ArrayNode = require('../lib/array'),
      CustomNode = require('../lib/custom');
    // LINE assert = require('assert'),
    // LINE   Compiler = require('vitesse').Compiler,
    // LINE   StringNode = require('vitesse').StringNode,
    // LINE   IntegerNode = require('vitesse').IntegerNode,
    // LINE   ArrayNode = require('vitesse').ArrayNode,
    // LINE   CustomNode = require('../lib/custom');
    // BEGIN
    var integer = new IntegerNode(null, null, {typeCheck:true});
    var string = new StringNode(null, null, {typeCheck:true});
    var schema = new ArrayNode(null, null, {typeCheck:true})
      .addPositionalItemValidation(0, string)
      .addPositionalItemValidation(1, integer)
      .addAdditionalItemsValidation(false);
    
    // Create a compiler
    var compiler = new Compiler({});
    // Compile the AST
    var func = compiler.compile(schema, {});
    // Validate {}
    var results = func.validate({});
    assert.equal(1, results.length);
    assert.equal('field is not an array', results[0].message);
    assert.deepEqual(['object'], results[0].path);
    assert.ok(results[0].rule === schema);

    // Validate [1]
    var results = func.validate([1]);
    assert.equal(1, results.length);
    assert.equal('field is not a string', results[0].message);
    assert.deepEqual(['object', '0'], results[0].path);
    assert.ok(results[0].rule === string);

    // Validate ['1', '1']
    var results = func.validate(['1', '1']);
    assert.equal(1, results.length);
    assert.equal('field is not an integer', results[0].message);
    assert.deepEqual(['object', '1'], results[0].path);
    assert.ok(results[0].rule === integer);

    // Validate ['1', 2, 'test']
    var results = func.validate(['1', 2, 'test']);
    assert.equal(1, results.length);
    assert.equal('array contains invalid items', results[0].message);
    assert.deepEqual(['object'], results[0].path);
    assert.ok(results[0].rule === schema);

    // Validate ['1']
    var results = func.validate(['1']);
    assert.equal(0, results.length);
    // END
    test.done();
  }
}

/**
 * Create an Array validation that requires all elements to be unique
 * @example-class ArrayNode
 * @example-method uniqueItems
 */
exports['ensure all array elements are unique'] = {
  // The actual test we wish to run
  test: function(configure, test) {
    var assert = require('assert'),
      Compiler = require('../lib/compiler').Compiler,
      ArrayNode = require('../lib/array'),
      CustomNode = require('../lib/custom');
    // LINE assert = require('assert'),
    // LINE   Compiler = require('vitesse').Compiler,
    // LINE   ArrayNode = require('vitesse').ArrayNode,
    // LINE   CustomNode = require('../lib/custom');
    // BEGIN
    var schema = new ArrayNode(null, null, {typeCheck:true})
      .uniqueItems(true);
    
    // Create a compiler
    var compiler = new Compiler({});
    // Compile the AST
    var func = compiler.compile(schema, {});
    // Validate {}
    var results = func.validate({});
    assert.equal(1, results.length);
    assert.equal('field is not an array', results[0].message);
    assert.deepEqual(['object'], results[0].path);
    assert.ok(results[0].rule === schema);

    // Validate [1]
    var results = func.validate([1]);
    assert.equal(0, results.length);

    // Validate [1, 2, 1]
    var results = func.validate([1, 2, 1]);
    assert.equal(1, results.length);
    assert.equal('array contains duplicate values', results[0].message);
    assert.deepEqual(['object'], results[0].path);
    assert.ok(results[0].rule === schema);
    // END
    test.done();
  }
}
</code></pre>
        </article>
    </section>






                    
                    <!-- disqus code -->
                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                        var disqus_shortname = 'nodejsmongodbdriver'; // required: replace example with your forum shortname

                        /* * * DON'T EDIT BELOW THIS LINE * * */
                        (function() {
                            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                        })();
                    </script>
                    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>                    
                    <!-- // disqus code -->
                    

                    <footer>
                        Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta3</a> on Wed Oct 07 2015 13:03:12 GMT+0200 (CEST)
                    </footer>
                </div>
            </td>
        </tr>
    </table>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
